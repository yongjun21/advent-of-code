const assert = require('assert');

function findLongestHike(input) {
  const [nodes, start, end] = survey(input);
  const unvisited = [];
  unvisited.push([start, 0, []])

  let maxSteps = 0;
  while (unvisited.length > 0) {
    const [next, steps, path] = unvisited.pop();
    if (next === end) {
      if (steps > maxSteps) maxSteps = steps;
    }
    for (const [adj, adjSteps] of nodes.get(next).adjacent) {
      if (path.includes(adj)) continue;
      unvisited.push([adj, steps + adjSteps, [...path, adj]]);
    }
  }
  return maxSteps;
}

function findLongestHike2(input) {
  input = input.map(line => line.replace(/[>v<^]/g, '.'))
  return findLongestHike(input);
}

function survey(input) {
  const width = input[0].length;
  const height = input.length;

  assert([...input[0]].filter(v => v === '#').length === width - 1);
  assert([...input[height - 1]].filter(v => v === '#').length === width - 1);
  assert(input.every(line => line[0] === '#' && line[width - 1] === '#'));

  const nodes = new Map();
  let start, end;
  for (let i = 0; i < width; i++) {
    if (input[0][i] === '.') {
      start = i;
      nodes.set(start, { i, j: 0, oneway: true, adjacent: new Map() });
    }
    if (input[height - 1][i] === '.') {
      end = (height - 1) * width + i;
      nodes.set(end, { i, j: height - 1, oneway: true, adjacent: new Map() });
    }
  }

  for (let j = 1; j < height - 1; j++) {
    for (let i = 1; i < width - 1; i++) {
      if (input[j][i] === '#') continue;
      const index = j * width + i;

      if (
        input[j][i] === '>' ||
        input[j][i] === 'v' ||
        input[j][i] === '<' ||
        input[j][i] === '^'
      ) {
        nodes.set(index, { i, j, oneway: true, adjacent: new Map() });
        continue;
      }

      let adjacent = 0;
      if (input[j][i + 1] !== '#') adjacent++;
      if (input[j + 1][i] !== '#') adjacent++;
      if (input[j][i - 1] !== '#') adjacent++;
      if (input[j - 1][i] !== '#') adjacent++;
      if (adjacent > 2) {
        nodes.set(index, { i, j, oneway: false, adjacent: new Map() });
      }
    }
  }

  const visited = new Set();
  const unvisited = [];
  unvisited.push([start, 0, 0, nodes.get(start)]);

  while (unvisited.length > 0) {
    const [i, j, prevSteps, prevNode] = unvisited.pop();
    const index = j * width + i;
    let currNode = prevNode;
    let currSteps = prevSteps + 1;
    if (nodes.has(index) && nodes.get(index) !== prevNode) {
      currNode = nodes.get(index);
      const prevMaxSteps = prevNode.adjacent.get(index) ?? prevSteps;
      const currMaxSteps = Math.max(prevMaxSteps, prevSteps);
      prevNode.adjacent.set(index, currMaxSteps);
      if (!prevNode.oneway) currNode.adjacent.set(prevNode.j * width + prevNode.i, currMaxSteps);
      currSteps = 1;
    }
      
    if (visited.has(index)) continue;
    visited.add(index);

    if (i < width - 1 && input[j][i + 1] !== '#' && input[j][i + 1] !== '<') {
      unvisited.push([i + 1, j, currSteps, currNode])
    }
    if (j < height - 1 && input[j + 1][i] !== '#' && input[j + 1][i] !== '^') {
      unvisited.push([i, j + 1, currSteps, currNode])
    }
    if (i > 0 && input[j][i - 1] !== '#' && input[j][i - 1] !== '>') {
      unvisited.push([i - 1, j, currSteps, currNode])
    }
    if (j > 0 && input[j - 1][i] !== '#' && input[j - 1][i] !== 'v') {
      unvisited.push([i, j - 1, currSteps, currNode])
    }
  }
  return [nodes, start, end];
}

const test2 = `
#.#####################
#.......#########...###
#######.#########.#.###
###.....#.>.>.###.#.###
###v#####.#v#.###.#.###
###.>...#.#.#.....#...#
###v###.#.#.#########.#
###...#.#.#.......#...#
#####.#.#.#######.#.###
#.....#.#.#.......#...#
#.#####.#.#.#########v#
#.#...#...#...###...>.#
#.#.#v#######v###.###v#
#...#.>.#...>.>.#.###.#
#####v#.#.###v#.#.###.#
#.....#...#...#.#.#...#
#.#########.###.#.#.###
#...###...#...#...#.###
###.###.#.###v#####v###
#...#...#.#.>.>.#.>.###
#.###.###.#.###.#.#v###
#.....###...###...#...#
#####################.#
`
  .trim()
  .split('\n');

const test = `
#.###########################################################################################################################################
#...#...#...#...###...###.....#...#...###...#.........#...###...#...#...###.........#.......###...#.....#.....###...#...#...#.....#.........#
###.#.#.#.#.#.#.###.#.###.###.#.#.#.#.###.#.#.#######.#.#.###.#.#.#.#.#.###.#######.#.#####.###.#.#.###.#.###.###.#.#.#.#.#.#.###.#.#######.#
###.#.#.#.#.#.#...#.#...#...#.#.#.#.#.#...#.#.....#...#.#.#...#...#.#.#...#.......#.#.....#...#.#.#.#...#...#...#.#.#.#.#.#.#.#...#.#.......#
###.#.#.#.#.#.###.#.###.###.#.#.#.#.#.#.###.#####.#.###.#.#.#######.#.###.#######.#.#####.###.#.#.#.#.#####.###.#.#.#.#.#.#.#.#.###.#.#######
#...#.#.#.#.#...#.#.#...#...#.#.#.#.#.#...#.###...#.....#.#.......#.#.#...#...###.#.#####...#.#.#.#.#.#####...#.#.#.#.#.#.#.#.#...#.#.......#
#.###.#.#.#.###.#.#.#.###.###.#.#.#.#.###.#.###.#########.#######.#.#.#.###.#.###.#.#######.#.#.#.#.#.#######.#.#.#.#.#.#.#.#.###.#.#######.#
#...#.#...#.#...#...#...#.#...#.#.#.#.#...#.#...#.........#.......#...#...#.#.#...#...#####.#.#.#.#.#...>.>...#.#.#.#.#.#.#.#.###...#.......#
###.#.#####.#.#########.#.#.###.#.#.#.#.###.#.###.#########.#############.#.#.#.#####.#####.#.#.#.#.#####v#####.#.#.#.#.#.#.#.#######.#######
###.#.#.....#.#.....#...#.#.>.>.#.#.#.#...#.#...#.#...#...#.......#.....#.#.#.#...#...#.....#...#...#...#.....#...#.#.#.#.#.#.#.......#######
###.#.#.#####.#.###.#.###.###v###.#.#.###.#.###.#.#.#.#.#.#######.#.###.#.#.#.###.#.###.#############.#.#####.#####.#.#.#.#.#.#.#############
#...#.#...#...#...#...###...#.###.#.#...#.#.#...#.#.#.#.#...>.>...#...#...#.#.###.#.###.........#.....#.....#...#...#.#...#...#.............#
#.###.###.#.#####.#########.#.###.#.###.#.#.#.###.#.#.#.#####v#######.#####.#.###.#.###########.#.#########.###.#.###.#####################.#
#.....###...#...#...#.......#...#...###...#.#.#...#.#.#...###.......#...#...#.....#.>.>...#.....#.........#...#.#.....#.....#...###...#.....#
#############.#.###.#.#########.###########.#.#.###.#.###.#########.###.#.###########v###.#.#############.###.#.#######.###.#.#.###.#.#.#####
#.............#.###.#.....#.....###...###...#.#...#.#.#...#.........###.#.#.......###...#.#.#.............###.#...#...#...#.#.#.#...#...#...#
#.#############.###v#####.#.#######.#.###.###.###.#.#.#.###.###########.#.#.#####.#####.#.#.#.###############.###.#.#.###.#.#.#.#.#######.#.#
#...#.........#.###.>.....#.......#.#...#.#...###.#.#.#.###...........#.#.#.#...#.#...#.#.#.#...#...#...#...#...#.#.#...#.#...#.#.........#.#
###.#.#######.#.###v#############.#.###.#.#.#####.#.#.#.#############.#.#.#.#.#.#.#.#.#.#.#.###.#.#.#.#.#.#.###.#.#.###.#.#####.###########.#
###...#.......#...#.#...#####.....#.#...#...#...#...#...#######.......#...#...#.#...#...#.#...#...#...#...#...#.#.#...#...#...#.###.........#
#######.#########.#.#.#.#####.#####.#.#######.#.###############.###############.#########.###.###############.#.#.###.#####.#.#.###.#########
###...#.......#...#...#...#...#.....#...#...#.#.#.....#...#.....#...#...#...#...#...#...#...#.#...............#.#.#...#...#.#.#...#.........#
###.#.#######.#.#########.#.###.#######.#.#.#.#.#.###.#.#.#.#####.#.#.#.#.#.#.###.#.#.#.###.#.#.###############.#.#.###.#.#.#.###.#########.#
#...#.......#.#.#...#.....#.#...#.......#.#...#.#...#...#.#.......#...#.#.#.#.....#...#...#...#.........#...###...#.....#.#.#...#...........#
#.#########.#.#.#.#.#.#####.#.###.#######.#####.###.#####.#############.#.#.#############.#############.#.#.#############.#.###.#############
#...#.....#...#...#.#.....#...###...#...#...#...###.#...#.............#.#.#.......#...#...#...........#...#...#...#...#...#.###.............#
###.#.###.#########.#####.#########.#.#.###.#.#####.#.#.#############.#.#.#######.#.#.#.###.#########.#######.#.#.#.#.#.###.###############.#
###...###.#.......#...#...#.........#.#...#.#.#...#...#.#...........#...#...#...#...#...###.........#.#.......#.#.#.#.#.....#.....#.........#
#########.#.#####.###.#.###.#########.###.#.#.#.#.#####.#.#########.#######.#.#.###################.#.#.#######.#.#.#.#######.###.#.#########
#####.....#.#.....###...###...........###...#...#.#...#...#.........#.....#...#...###...###.........#...###...#.#.#.#.#.....#...#...#.......#
#####.#####.#.###################################.#.#.#####.#########.###.#######.###.#.###.###############.#.#.#.#.#.#.###.###.#####.#####.#
#.....#.....#...#...........#.....###...#.........#.#...###.........#...#.........#...#...#.........#...#...#.#.#.#.#.#.#...###.......#.....#
#.#####.#######.#.#########.#.###.###.#.#.#########.###.###########.###.###########.#####.#########.#.#.#.###.#.#.#.#.#.#.#############.#####
#...#...#.......#.#.........#...#...#.#.#.....#####...#.#...#.......###.........###...#...#...#...#.#.#.#...#.#.#.#.#.#.#.#...#...#...#.....#
###.#.###.#######.#.###########.###.#.#.#####.#######.#.#.#.#.#################.#####.#.###.#.#.#.#v#.#.###.#.#.#.#.#.#.#.#.#.#.#.#v#.#####.#
#...#.#...#...###.#.....#...###...#.#.#.....#...#...#.#...#.#.......#...#...#...#...#.#...#.#.#.#.>.>.#...#.#.#.#.#.#.#.#.#.#.#.#.>.#.......#
#.###.#.###.#v###.#####.#.#.#####.#.#.#####.###.#.#.#.#####.#######.#.#.#.#.#.###.#.#.###.#.#.#.###v#####.#.#.#.#.#.#.#.#.#.#.#.###v#########
#.....#...#.#.>...#.....#.#.#...#.#.#.....#.....#.#...#.....#.....#.#.#.#.#.#...#.#...###.#.#...###...###...#...#.#.#.#.#.#.#.#.#...#.......#
#########.#.#v#####.#####.#.#.#.#.#.#####.#######.#####.#####.###.#.#.#.#.#.###.#.#######.#.#########.###########.#.#.#.#.#.#.#.#.###.#####.#
#.........#.#...###...###.#...#...#.#.....#.....#.....#.#...#...#...#.#.#.#.###.#...#.....#.......###...#...#...#...#...#...#.#.#.....#.....#
#.#########.###.#####.###.#########.#.#####.###.#####.#.#.#.###v#####.#.#.#.###v###.#.###########.#####.#.#.#.#.#############.#.#######.#####
#.#.........###.....#...#.........#.#.....#...#...#...#.#.#...>.>.#...#.#.#...>.>.#.#.#.....#.....#.....#.#...#.....#.......#...#.....#.....#
#.#.###############.###.#########.#.#####v###.###.#.###.#.#####v#.#.###.#.#####v#.#.#.#.###.#.#####.#####.#########.#.#####.#####.###.#####.#
#...###...#.........###...#.....#.#...#.>.>.#.#...#...#...#...#.#.#...#.#.#.....#.#.#...###...#...#.....#.#.....#...#...#...###...###.#.....#
#######.#.#.#############.#.###.#.###.#.#v#.#.#.#####.#####.#.#.#.###.#.#.#.#####.#.###########.#.#####.#.#.###.#.#####.#.#####.#####.#.#####
#.......#.#...........#...#.#...#...#.#.#.#.#.#...#...#...#.#...#.#...#...#.....#...#...#####...#.#...#...#...#...#.....#.#...#.....#.#.....#
#.#######.###########.#.###.#.#####.#.#.#.#.#.###.#.###.#.#.#####.#.###########.#####.#.#####.###.#.#.#######.#####.#####.#.#.#####.#.#####.#
#.......#.............#.#...#.......#...#.#.#.#...#...#.#.#.....#.#.#...........#...#.#.....#.#...#.#.###...#...###.....#.#.#.#.....#.......#
#######.###############.#.###############.#.#.#.#####.#.#.#####.#.#.#.###########.#.#.#####.#.#.###.#.###.#.###.#######.#.#.#.#.#############
#.......#...........###...#.....#.........#...#.......#.#...#...#.#.#.............#...#.....#.#.#...#...#.#.....#...#...#.#.#.#...#...#...###
#.#######.#########.#######.###.#.#####################.###.#.###.#.###################.#####.#.#.#####.#.#######.#.#.###.#.#.###.#.#.#.#.###
#...#...#.#.....#...#.......#...#.#...#...###...#.......###...###...###...#...###.......#...#.#.#...#...#.....###.#.#.#...#.#.###.#.#.#.#...#
###.#.#.#.#.###.#v###.#######.###.#.#.#.#.###.#.#.#####################.#.#.#.###.#######.#.#.#.###.#.#######v###.#.#.#.###.#.###v#.#.#.###.#
###...#...#...#.#.>.#.#.......###...#...#.....#.#.......#####...#...#...#...#.....###.....#.#.#...#.#...#...>.>...#.#.#.#...#.#.>.#.#.#.#...#
#############.#.#v#.#.#.#######################.#######.#####.#.#.#.#.###############.#####.#.###.#.###.#.###v#####.#.#.#.###.#.#v#.#.#.#.###
#.............#...#...#.#.....#...#...........#.#...###.......#.#.#.#...#...#...#...#...###.#...#.#...#...###.....#.#.#...#...#.#.#.#...#...#
#.#####################.#.###.#.#.#.#########.#.#.#.###########.#.#.###.#.#.#.#.#.#.###.###.###.#.###.###########.#.#.#####.###.#.#.#######.#
#.........#...#...###...#.#...#.#.#.........#...#.#.............#.#.#...#.#...#...#...#...#.#...#.#...#...###...#.#.#.#.....#...#.#.#.......#
#########.#.#.#.#.###.###.#.###.#.#########.#####.###############.#.#.###.###########.###.#.#.###.#.###.#.###.#.#.#.#.#.#####.###.#.#.#######
#.........#.#...#...#.#...#.#...#...#.......#...#.......#.......#.#.#.....#...#.......#...#.#...#.#.###.#.#...#.#.#.#.#.#...#...#.#.#.......#
#.#########.#######.#.#.###.#.#####.#v#######.#.#######.#.#####.#.#.#######.#.#.#######.###.###.#.#.###.#.#.###.#.#.#.#.#.#.###.#.#.#######.#
#.#.........###.....#...###.#.#...#.>.>.#...#.#.....#...#.#.....#.#.###...#.#.#.....#...###.....#...#...#...###...#.#.#.#.#...#.#...###.....#
#.#.###########.###########.#.#.#.###v#.#.#.#.#####.#.###.#.#####.#.###.#.#.#.#####v#.###############.#############.#.#.#.###.#.#######.#####
#...#.........#...........#...#.#.....#.#.#.#.....#.#...#.#...#...#...#.#...#...#.>.>.#...###.....###.............#.#.#...#...#...#.....#####
#####.#######.###########.#####.#######.#.#.#####.#.###v#.###.#.#####.#.#######.#.#v###.#.###.###.###############.#.#.#####.#####.#.#########
#...#.......#...........#...###.......#...#.....#.#.#.>.>.###.#.#.....#.....###...#.....#.....#...#.......#...#...#.#...#...#...#.#...#...###
#.#.#######.###########.###.#########.#########.#.#.#.#v#####.#.#.#########.###################.###.#####.#.#.#.###.###.#.###.#.#.###.#.#.###
#.#...#...#...........#...#...###...#.........#.#.#.#.#.....#.#.#...#...#...#...#...#...........###.....#...#...###.....#...#.#.#.###...#...#
#.###.#.#.###########.###.###.###.#.#########.#.#.#.#.#####.#.#.###.#.#.#.###.#.#.#.#.#################.###################.#.#.#.#########.#
#...#...#.............###.....#...#.#.........#.#.#.#.#...#.#...###...#...#...#...#...###...###.........#...#.....#.......#.#.#.#.#.........#
###.###########################.###.#.#########.#.#.#.#.#.#.###############.#############.#.###.#########.#.#.###.#.#####.#.#.#.#.#.#########
###...#...#...#...............#...#.#.......###...#...#.#...###.....###...#.....#.....#...#...#.........#.#...#...#.#.....#...#.#.#.........#
#####.#.#.#.#.#.#############.###.#.#######.###########.#######.###.###.#.#####.#.###.#.#####.#########.#.#####.###.#.#########.#.#########.#
#####...#...#...#.........#...###.#...#...#.....###...#...#...#...#...#.#.#...#...###.#...#...#...#...#...#.....#...#.........#.#.#.........#
#################.#######.#.#####.###.#.#.#####.###.#.###.#.#.###.###.#.#.#.#.#######.###.#.###.#.#.#.#####v#####.###########.#.#.#.#########
###...#...#.....#.###...#...#...#...#...#.#...#.#...#.....#.#.....#...#.#.#.#.###...#.#...#...#.#.#.#.#...>.>.#...#...........#...#.........#
###.#.#.#.#.###.#v###.#.#####.#.###.#####.#.#.#.#.#########.#######.###.#.#.#.###.#.#v#.#####.#.#.#.#.#.###v#.#.###.#######################.#
###.#.#.#.#...#.#.>.#.#.#...#.#.###.....#...#...#.......###.......#...#.#...#.#...#.>.>.#...#.#.#.#.#.#.#...#...#...###...#...#...#...#.....#
###.#.#.#.###.#.#v#.#.#.#.#.#.#.#######.###############.#########.###.#.#####.#.#####v###.#.#.#.#.#.#.#.#.#######.#####.#.#.#.#.#.#.#.#.#####
#...#...#.....#.#.#.#.#...#.#.#.......#.......#.....###.....#...#.###.#.....#...#...#.#...#.#.#.#...#.#.#.#...###.....#.#...#.#.#.#.#.#...###
#.#############.#.#.#.#####.#.#######.#######.#.###.#######.#.#.#.###.#####.#####.#.#.#.###.#.#.#####.#.#.#.#.#######.#.#####.#.#.#.#.###.###
#.............#...#...#.....#.###.....#.......#...#.#.......#.#.#...#.#.....#...#.#.#...#...#.#.....#...#...#...#...#...#.....#.#...#...#...#
#############.#########.#####.###.#####.#########.#.#.#######.#.###.#.#.#####.#.#.#.#####.###.#####.###########.#.#.#####.#####.#######.###.#
#.............#...#...#.....#.#...#...#.....#.....#.#.....###.#...#.#.#.#.....#...#...#...###...#...#...........#.#.#.....#...#...#.....#...#
#.#############.#.#.#.#####.#.#.###.#.#####.#.#####.#####.###.###.#.#.#.#.###########.#.#######.#.###.###########.#.#.#####.#.###.#.#####v###
#...#...........#...#.#.....#.#...#.#.#.....#.#...#.#.....#...###.#.#...#...........#.#.###...#...###...#.........#.#.#...#.#.#...#.....>.###
###.#.###############.#.#####.###.#.#.#v#####.#.#.#.#.#####.#####.#.###############.#.#.###.#.#########.#.#########.#.#.#.#.#.#.#########v###
###...#...............#.#...#...#...#.>.>...#.#.#...#...###.....#.#.#.............#.#...#...#.......###...#.......#.#.#.#.#.#.#.#...#...#...#
#######.###############.#.#.###.#######v###.#.#.#######v#######.#.#.#.###########.#.#####.#########.#######.#####.#.#.#.#.#.#.#.#.#.#.#.###.#
#.....#...............#...#.....###.....#...#.#.#...#.>.>...#...#.#.#...........#...#.....#...#...#.#.......#...#...#...#.#.#.#.#.#...#.....#
#.###.###############.#############.#####.###.#.#.#.#.#v###.#.###.#.###########.#####.#####.#.#.#.#.#.#######.#.#########.#.#.#.#.###########
#...#...........#.....#...#.......#.....#...#.#.#.#.#.#...#.#.#...#...#.........#...#.#...#.#...#...#.......#.#.........#.#.#...#.#.........#
###.###########.#.#####.#.#.#####.#####.###.#.#.#.#.#.###.#.#.#.#####.#.#########.#.#.#.#.#.###############.#.#########.#.#.#####.#.#######.#
###.....#.....#...#####.#.#.....#.#.....###.#.#.#.#...#...#...#.......#...........#...#.#...###...###.......#.#.........#.#.#.....#.#.....#.#
#######.#.###.#########.#.#####.#.#.#######.#.#.#.#####.###############################.#######.#.###.#######.#.#########.#.#.#####.#.###.#.#
#.......#.###.....###...#.#...#.#.#.......#.#.#.#.#.....###.......#...#.........#.......###.....#.#...#.......#.........#.#.#.#.....#...#.#.#
#.#######.#######.###.###.#.#.#.#.#######.#.#.#.#.#.#######.#####.#.#.#.#######.#.#########.#####.#.###.###############.#.#.#.#.#######.#.#.#
#...#.....#.......#...#...#.#.#.#.....#...#...#...#...#.....#.....#.#...#.....#...#####...#.#.....#.....#...............#...#.#.#.......#...#
###.#.#####.#######.###.###.#.#v#####.#.#############.#.#####.#####.#####.###.#########.#.#.#.###########.###################.#.#.###########
###...#...#.......#...#.....#.>.>.#...#.......###...#...#...#.....#.......###.#...###...#...#.....#.....#...............#...#...#.#.........#
#######.#.#######.###.#########v#.#.#########.###.#.#####.#.#####.###########v#.#.###.###########.#.###.###############.#.#.#####.#.#######.#
#...#...#...#.....#...#.......#.#.#...........#...#.......#.......#.....###.>.>.#.....#.....#.....#.#...#...............#.#.#...#...###...#.#
#.#.#.#####.#.#####.###.#####.#.#.#############.###################.###.###.#v#########.###.#.#####.#.###.###############.#.#.#.#######.#.#.#
#.#.#.....#...#...#...#.#...#...#.............#.............#...###...#.....#.....#...#...#...#.....#.###.............###.#.#.#.###.....#...#
#.#.#####.#####.#.###.#.#.#.#################.#############.#.#.#####.###########.#.#.###.#####.#####.###############.###.#.#.#.###.#########
#.#.......#...#.#.....#...#...#...#.........#.#...###...#...#.#.#...#.........#...#.#.....#...#.....#.#...#...#.......#...#.#.#...#.........#
#.#########.#v#.#############.#.#.#.#######.#.#.#.###.#.#.###.#.#.#.#########.#.###.#######.#.#####.#.#.#.#.#.#v#######.###.#.###.#########.#
#.#...#...#.#.>.#.........###...#.#...#...#...#.#.#...#.#.#...#.#.#...#.....#.#...#...#...#.#...#...#...#.#.#.>.>.#...#...#.#...#.#.........#
#.#.#.#.#.#.#v###.#######.#######.###.#.#.#####.#.#.###.#.#.###.#.###.#.###.#.###.###.#.#.#.###.#.#######.#.###v#.#.#.###.#.###.#.#.#########
#.#.#...#...#.....#...#...#.......###.#.#.#...#.#...#...#...#...#.#...#...#.#.#...###...#...#...#...#...#...#...#.#.#...#.#.###.#.#.....#...#
#.#.###############.#.#.###.#########.#.#.#.#.#.#####.#######.###.#.#####.#.#.#.#############.#####.#.#.#####.###.#.###.#.#.###.#.#####v#.#.#
#.#.#.....#####.....#...#...#...#...#.#.#.#.#.#...#...#...###.....#.#...#.#.#.#...#.........#.#...#.#.#.....#.#...#...#.#.#...#.#...#.>.#.#.#
#.#.#.###.#####.#########.###.#.#.#.#.#.#.#.#.###.#.###.#.#########v#.#.#.#.#.###.#.#######.#.#.#.#.#.#####.#.#.#####.#.#.###.#.###.#.#v#.#.#
#...#...#.......###...###.....#...#.#...#.#.#...#.#.#...#.........>.>.#.#.#...###...#.......#...#...#.....#...#.#...#.#.#...#.#.###...#...#.#
#######.###########.#.#############.#####.#.###.#.#.#.#############v###.#.###########.###################.#####.#.#.#.#.###.#.#.###########.#
#...###.............#...#...#.....#...###.#...#.#.#...#...#.....#...###.#...#.........#...#...#.......#...#...#...#...#.#...#...#.....#.....#
#.#.###################.#.#.#.###.###.###.###.#.#.#####.#.#.###.#.#####.###.#.#########.#.#.#.#.#####.#.###.#.#########.#.#######.###.#.#####
#.#.....................#.#.#.#...###...#.....#.#...#...#...#...#.....#.#...#...........#...#.#.....#...###.#.#...#...#...###...#...#.#.#...#
#.#######################.#.#.#.#######.#######.###.#.#######.#######.#.#.###################.#####.#######.#.#.#.#.#.#######.#.###.#.#.#.#.#
#.#...............#...#...#...#...#.....#.....#.....#.......#.#...#...#...#...#...#...........#...#.........#.#.#.#.#...#...#.#.#...#.#...#.#
#.#.#############.#.#.#.#########.#.#####.###.#############.#.#.#.#.#######.#.#.#.#.###########.#.###########.#.#.#.###.#.#.#.#.#.###.#####.#
#.#.#.............#.#.#.......#...#.......#...#.........#...#...#...###...#.#...#...#...#...###.#.........#...#.#.#.#...#.#.#.#.#...#.#.....#
#.#.#.#############.#.#######.#.###########v###.#######.#.#############.#.#.#########.#.#.#.###.#########.#.###.#.#.#.###.#.#.#.###.#.#v#####
#...#...........#...#.....#...#...#...#...>.>.#.......#.#.........#...#.#.#...........#...#...#.....#...#...###.#...#.#...#.#.#.#...#.>.#...#
###############.#.#######.#.#####.#.#.#.#####.#######.#.#########.#.#.#.#.###################.#####.#.#.#######.#####.#.###.#.#.#.#####v#.#.#
#...............#...#.....#.....#.#.#.#...###.....#...#.....#.....#.#.#.#.###.................#...#.#.#.###.....#...#...#...#.#.#.#.....#.#.#
#.#################.#.#########.#.#.#.###.#######.#.#######.#.#####.#.#.#.###.#################.#.#.#.#.###.#####.#.#####.###.#.#.#.#####.#.#
#.....#...#...#...#.#.#...#...#.#.#.#.#...#.......#.......#...#.....#.#.#...#...............#...#.#...#...#.......#.....#...#.#.#.#.....#.#.#
#####.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.###.#############.#####.#####.#.###.###############.#.###.#######.#############.###.#.#.#.#####.#.#.#
#.....#.#.#.#.#.#.#.#...#.#.#...#...#.#.#...#.....###.....#...#.....#.#.#...###...#.........#...#.#...#...#.....#...#...###...#.#.#.....#.#.#
#.#####.#.#.#.#.#.#.#####.#.#########.#.#.###.###.###v#####.#.#####.#.#.#.#####.#.#v###########.#.#.#.#v###.###.#.#.#.#########.#.#.#####.#.#
#.....#.#...#.#.#.#.###...#...#.......#.#.#...#...#.>.>...#.#...#...#...#.....#.#.>.>.#.....#...#.#.#.>.>.#...#.#.#.#.........#...#...#...#.#
#####.#.#####.#.#.#.###.#####.#.#######.#.#.###.###.#####.#.###.#.###########.#.#####.#.###.#.###.#.#####.###.#.#.#.#########.#######.#.###.#
#.....#.###...#.#...#...#...#.#.#.....#.#.#.###...#.#.....#...#...#...........#.....#.#...#.#.#...#.....#.#...#.#.#.#.....#...###...#.#...#.#
#.#####.###.###.#####.###.#.#.#.#.###.#.#.#.#####.#.#.#######.#####.###############.#.###.#.#.#.#######.#.#.###.#.#.#.###.#.#####.#.#.###.#.#
#.....#.#...#...#.....#...#.#.#...###.#.#.#...###.#.#...#...#.....#...#.....#.....#.#...#.#...#.#...#...#.#...#.#.#.#.#...#.....#.#.#.....#.#
#####.#.#.###.###.#####.###.#.#######.#.#.###.###.#.###.#.#.#####.###.#.###.#.###.#.###.#.#####.#.#.#.###.###.#.#.#.#.#.#######.#.#.#######.#
#.....#.#...#.###.....#...#.#.#.......#.#.#...#...#.###.#.#...#...#...#.#...#...#.#.#...#...#...#.#.#...#.#...#.#.#.#.#.#...#...#.#.........#
#.#####.###.#.#######.###.#.#.#.#######.#.#.###.###.###.#.###.#.###.###.#.#####.#.#.#.#####.#.###.#.###.#.#.###.#.#.#.#.#.#.#.###.###########
#.......###...#######.....#...#.........#...###.....###...###...###.....#.......#...#.......#.....#.....#...###...#...#...#...###...........#
###########################################################################################################################################.#
`
  .trim()
  .split('\n');

console.log(findLongestHike(test));
console.log(findLongestHike2(test));
